{% extends "base.html" %}
<!-- load static -->
{% load static %}
<!-- about title -->
{% block title %} | åœ˜å¥‘å°çµ„ {% endblock %}
<!-- about main content -->
{% block content %}
<!-- showcase -->

{% include "includes/_topbar.html" with title="åœ˜å¥‘å°çµ„" subtitle="èšæœƒæ™‚é–“è¡¨" %}


  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.6.2/css/bootstrap.min.css"
    />
    <style>
      .card-header {
        background-color: #20866b;
        color: white;
      }
      .list-group-item.active {
        background-color: #20866b;
        border-color: #20866b;
        color: white;
      }
      .list-group-item {
        background-color: #cdefe6;
        border-color: #20866b;
        color: rgb(56, 56, 56);
      }
      /* Ensure text remains readable on hover if not active */
      .list-group-item:hover:not(.active) {
        background-color: #f8f9fa;
        color: #20866b;
      }
    </style>
  </head>
  <body>
    <div class="container py-4">
      <div class="alert alert-secondary mb-0">
        è«‹é»æ“Šèšæœƒé …ç›®ï¼Œä¸‹æ–¹æœƒé¡¯ç¤ºæ´»å‹•å…§å®¹èˆ‡ Posterã€‚
      </div>
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-header font-weight-bold">
              <div class="row">
                <div class="col-4"><h5>èšæœƒ/å°çµ„åç¨±</h5></div>
                <div class="col-3"><h5>æ—¥æœŸ</h5></div>
                <div class="col-3"><h5>æ™‚é–“</h5></div>
                <div class="col-2"><h5>åœ°é»</h5></div>
              </div>
            </div>
            <div class="list-group list-group-flush" id="meetingList">
              {% for e in events %}
              <button
                class="list-group-item list-group-item-action"
                data-title="{{ e.title|escape }}"
                data-date="{{ e.date_text|escape }}"
                data-time="{{ e.time_text|escape }}"
                data-location="{{ e.location|escape }}"
                data-desc="{{ e.description|escape }}"
                data-poster="{% if e.poster %}{{ e.poster.url }}{% else %}https://picsum.photos/800/450{% endif %}"
              >
                <div class="row">
                  <div class="col-4">{{ e.title|escape }}</div>
                  <div class="col-3">{{ e.date_text|escape }}</div>
                  <div class="col-3">{{ e.time_text|escape }}</div>
                  <div class="col-2">{{ e.location|escape }}</div>
                </div>
              </button>
              {% endfor %}
            </div>
          </div>
        </div>

        <div class="col-12">
          <div id="posterArea"></div>
        </div>
      </div>
    </div>

    <script>
      const meetingList = document.getElementById("meetingList");
      const posterArea = document.getElementById("posterArea");

      meetingList.addEventListener("click", function (e) {
        const item = e.target.closest(".list-group-item");
        if (!item) return;

        document
          .querySelectorAll("#meetingList .list-group-item")
          .forEach((el) => el.classList.remove("active"));
        item.classList.add("active");

        const title = item.dataset.title || "";
        const date = item.dataset.date || "";
        const time = item.dataset.time || "";
        const location = item.dataset.location || "";
        const desc = item.dataset.desc || "";
        const poster = item.dataset.poster || "";

        posterArea.innerHTML = `
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">${title}</h5>
          <ul class="list-unstyled text-muted mb-2">
            <li>ğŸ“… æ—¥æœŸï¼š${date}</li>
            <li>â° æ™‚é–“ï¼š${time}</li>
            <li>ğŸ“ åœ°é»ï¼š${location}</li>
          </ul>
          ${desc ? `<p class="mb-0">${desc}</p>` : ``}
        </div>
        <img src="${poster}" class="card-img-top" style="max-height:1450px; object-fit:cover;" alt="${title}">
      </div>
    `;
      });
    </script>
  </body>

{% endblock %}
